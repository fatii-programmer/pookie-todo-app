"use strict";(()=>{var e={};e.id=716,e.ids=[716],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4770:e=>{e.exports=require("crypto")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},2254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},7261:e=>{e.exports=require("node:util")},8143:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>h});var n={};r.r(n),r.d(n,{POST:()=>p});var a=r(9303),o=r(8716),i=r(670),s=r(7070),u=r(1615),c=r(9178),l=r(4087);async function p(){let e=await (0,c.Gg)();return(0,u.cookies)().delete("token"),e&&await (0,l.ar)("user_logout",e.userId,void 0,{timestamp:new Date().toISOString()}),s.NextResponse.json({success:!0})}let d=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/auth/logout/route",pathname:"/api/auth/logout",filename:"route",bundlePath:"app/api/auth/logout/route"},resolvedPagePath:"C:\\Users\\pte\\Desktop\\hackathon-2\\app\\api\\auth\\logout\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:y}=d,x="/api/auth/logout/route";function f(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:h})}},9178:(e,t,r)=>{r.d(t,{Gg:()=>g,Gv:()=>l,V3:()=>p,c_:()=>c});var n=r(6091),a=r(6176),o=r(1615),i=r(2023),s=r.n(i);let u=new TextEncoder().encode(process.env.JWT_SECRET||"default-secret-change-me");async function c(e){return s().hash(e,10)}async function l(e,t){return s().compare(e,t)}async function p(e){return new n.N({userId:e}).setProtectedHeader({alg:"HS256"}).setExpirationTime("7d").sign(u)}async function d(e){try{return(await (0,a._)(e,u)).payload}catch{return null}}async function g(){let e=(0,o.cookies)(),t=e.get("token")?.value;return t?d(t):null}},4087:(e,t,r)=>{r.d(t,{ar:()=>p,lD:()=>g});var n=r(629),a=r.n(n),o=r(5315),i=r.n(o);let s=process.env.HISTORY_PATH||"./history";async function u(){try{await a().access(s)}catch{await a().mkdir(s,{recursive:!0})}}async function c(e){await u();let t=i().join(s,e);try{let e=await a().readFile(t,"utf-8");return JSON.parse(e)}catch{return[]}}async function l(e,t){await u();let r=i().join(s,e);await a().writeFile(r,JSON.stringify(t,null,2))}async function p(e,t,r,n){let a;let o={id:`${Date.now()}-${Math.random().toString(36).substring(2,9)}`,timestamp:new Date().toISOString(),userId:t,actionType:e,todoId:r,metadata:n};a="user_signup"===e||"user_login"===e||"user_logout"===e?"login-history.json":"todo-history.json";let i=await c(a);return i.push(o),await l(a,i),await d(t,o),o}async function d(e,t){let r=i().join(s,"users");try{await a().access(r)}catch{await a().mkdir(r,{recursive:!0})}let n=i().join(r,`${e}.json`),o=[];try{let e=await a().readFile(n,"utf-8");o=JSON.parse(e)}catch{}o.push(t),await a().writeFile(n,JSON.stringify(o,null,2))}async function g(e,t){let r=await c("todo-history.json");return e&&(r=r.filter(t=>t.userId===e)),void 0!==t&&(r=r.filter(e=>e.todoId===t)),r}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[276,881,972],()=>r(8143));module.exports=n})();